# discord-giveSC
discordでスーパーチャット風の画像を生成して送信するBotです

## 動作を確認した環境

Windows 10 Pro 21H2  
Windows 11 Home 21H2  
  
Python 3.10.4

## インストールが必要なライブラリ

py-cord  
```
pip install py-cord --pre
```
pillow  
```
pip install pillow
```
requests
```
pip install requests
```

## 必要なフォント
Meiryo UI 標準(meiryo.ttc)  
Roboto-Regular.ttf  
  
メイリオフォントはWindowsを使用している場合`C:\Windows\Fonts\Meiryo UI`にあります  
RobotoフォントはGoogle Fontsで公開されているので[ここ](https://fonts.google.com/specimen/Roboto?subset=japanese)からダウンロードしてください  
フォントはassetフォルダに配置してください


## 使い方

実行時に`main.py`と同じディレクトリに`token.txt`が存在しない場合、トークンを設定するためのGUIが起動します  
GUI内のテキストボックスにDiscord Botのトークンを入力して、`トークンを保存する`ボタンを押すと` token.txt`の作成と書き込みを行います  
  
誤ったトークンを入力した場合は、GUIが開いた状態であればテキストボックスに正しいトークンを入力した後で再度、`トークンを保存する`ボタンを押すことで書き込みなおすことができます    
誤ったトークンで書き込んでしまったがGUIを閉じてしまった場合や、トークンを変更した場合は`token.txt`を削除してから`main.py`を実行することでGUIを起動させることができます  
また、`token.txt`を直接書き換えても問題なく動くはずです  
  
トークンの保存が完了し、Botを起動したい場合は`Botを起動する`ボタンを押してください  
GUIは自動的に閉じられ、その後Botが起動します  
  
起動したらbotのいるサーバーで以下のコマンドを使用できます
```
!sc 金額 コメント
```
  
5000円分のコメントのないスパチャを送りたい場合は`!sc 5000`  
10000円分で「いつもみてます！」というコメントを付けたスパチャを送りたい場合は`!sc 10000 いつもみてます！`  
と送信すれば画像が生成されチャンネルに送信されます  

## 仕様

コマンドの基本形は  
```
!sc 金額 コメント
```
ですが、以下のような入力方法でも次のようなパターンで動作します 
  
```
!sc 金額 金額
```
２つ目の金額をコメントとして扱い、画像を生成します  
  
  
```
!sc コメント 金額
```
この場合は基本形で入力した場合と同じように画像が生成されます  
  
  
```
!sc コメント コメント
```
この場合は２つ目のコメントをコメントとして扱い、金額は100~50000円の中から乱数で選び画像を生成します  
  
  
改行などがある場合でも基本的には問題なく動くと思いますが、特に  
```
!sc コメント 金額
```
このパターンで書いた場合は、コメントの変数の取り方が異なるため正常に動作しないと思われるので、なるべく基本形を用いてコマンドを入力してください
  
```
!sc
```
だけで送信した場合は金額を100~50000円の中から乱数で選び画像を生成します  
